## unparse-compiler-state.pkg

# Compiled by:
#     src/lib/compiler/core.make6

package unparse_compiler_state:  Unparse_Compiler_State {		# Unparse_Compiler_State	is from   src/lib/compiler/front/typecheck-stuff/symbol-table/unparse-compiler-state.api

					# symbol			is from   src/lib/compiler/front/basics/mlcomp/symbol.pkg
					# types				is from   src/lib/compiler/front/typecheck-stuff/types/types.pkg
					# variables_and_constructors	is from   src/lib/compiler/front/typecheck-stuff/deep-syntax/variables-and-constructors.pkg
					# module			is from   src/lib/compiler/front/typecheck-stuff/modules/module.pkg
					# symbol_table			is from   src/lib/compiler/front/typecheck-stuff/symbol-table/symbol-table.pkg
					# symbol_table_entry		is from   src/lib/compiler/front/typecheck-stuff/symbol-table/symbol-table-entry.pkg

    package pp = prettyprint;		# prettyprint			is from   src/lib/prettyprint/src/prettyprint.pkg
					# prettyprint_symbol_table	is from   src/lib/compiler/front/typecheck-stuff/symbol-table/prettyprint-symbol-table.pkg

    fun unparse_compiler_table_set
            (pps:  prettyprint::Stream)
	    (compiler_table_set:  compiler_table_set::Compiler_Table_Set)
	=
	{
	    include  compiler_table_set;

            pp::string  pps   "Symbol table";             pp::newline pps;
            pp::string  pps   "------------";             pp::newline pps;
            pp::newline pps;

	    prettyprint_symbol_table::prettyprint_symbol_table
                pps
		(symbol_table_part  compiler_table_set);

            pp::newline pps;
            pp::newline pps;
            pp::newline pps;
            pp::string  pps   "Linking table";            pp::newline pps;
            pp::string  pps   "-------------";            pp::newline pps;
            pp::newline pps;
            pp::string  pps   "(unimplemented)";          pp::newline pps;

            pp::newline pps;
            pp::newline pps;
            pp::newline pps;
            pp::string  pps   "Inlining table";           pp::newline pps;
            pp::string  pps   "--------------";           pp::newline pps;
            pp::newline pps;
            pp::string  pps   "(unimplemented)";          pp::newline pps;
        };


    fun unparse_compiler_table_set_reference
            (pps:  prettyprint::Stream)
	    (compiler_table_set_reference:   compiler_state::Compiler_Table_Set_Reference)
	=
	unparse_compiler_table_set  pps   (compiler_table_set_reference.get ());


    fun unparse_compiler_state
            (pps:  prettyprint::Stream)
	=
	{   pp::string   pps   "Combined (top_level + base) compiler tableset";            pp::newline  pps;
	    pp::string   pps   "=============================================";            pp::newline  pps;
            unparse_compiler_table_set            pps  (compiler_state::combined ());

            pp::newline  pps;
            pp::newline  pps;
            pp::newline  pps;
	    pp::string   pps   "Toplevel compiler tableset";            pp::newline  pps;
	    pp::string   pps   "==========================";            pp::newline  pps;
            unparse_compiler_table_set_reference  pps  (compiler_state::top_level ());

            pp::newline  pps;
            pp::newline  pps;
            pp::newline  pps;
	    pp::string   pps   "Base compiler tableset";            pp::newline  pps;
	    pp::string   pps   "======================";            pp::newline  pps;
            unparse_compiler_table_set_reference  pps  (compiler_state::base ());

            pp::newline  pps;
            pp::newline  pps;
            pp::newline  pps;
            pp::string   pps   "Pervasive compiler tableset";            pp::newline  pps;
	    pp::string   pps   "===========================";            pp::newline  pps;
            unparse_compiler_table_set_reference  pps  compiler_state::pervasive;
        };


    fun unparse_compiler_state_to_file
        (prettyprint_filename:  String)
	=
	{
	    pp  = prettyprinter::make_file_prettyprinter  prettyprint_filename;
	    pps = pp.stream;

            unparse_compiler_state  pps; 

            pp::newline  pps;
            pp::newline  pps;
            pp::newline  pps;
	    pp::string   pps   "This file generated by unparse_compiler_state_to_file  from";           pp::newline  pps;
            pp::string   pps   "    src/lib/compiler/front/typecheck-stuff/symbol-table/unparse-compiler-state.pkg";
            pp::newline  pps;

	    pp.flush ();
	    pp.close ();
        };

};















##########################################################################
#   The following is support for outline-minor-mode in emacs.		 #
#  ^C @ ^T hides all Text. (Leaves all headings.)			 #
#  ^C @ ^A shows All of file.						 #
#  ^C @ ^Q Quickfolds entire file. (Leaves only top-level headings.)	 #
#  ^C @ ^I shows Immediate children of node.				 #
#  ^C @ ^S Shows all of a node.						 #
#  ^C @ ^D hiDes all of a node.						 #
#  ^HFoutline-mode gives more details.					 #
#  (Or do ^HI and read emacs:outline mode.)				 #
#									 #
# Local variables:							 #
# mode: outline-minor							 #
# outline-regexp: "[{ \t]*\\(fun \\)"			 		 #
# End:									 #
##########################################################################


## Code by Jeff Prothero: Copyright (c) 2010,
## released under Gnu Public Licence version 3.
